// Copyright 2018 FIX94
// This code is licensed to you under the terms of the GNU GPL, version 2;
// see file LICENSE or http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt

// Modifications made by Zephiles

    .section .start,"ax"
    .globl _start
    
_start:
    // Save absolute position of _start
    mr 3, 0
    
    // Disable interrupts
    mfmsr 4 ; rlwinm 4,4,0,17,15 ; mtmsr 4 ; isync

    // Set up a stack frame.
    lis 1,0x8000 ; addi 1,1,0x3000 ; li 0,0 ; stwu 0,-64(1)

    // Go for it!
    b _main